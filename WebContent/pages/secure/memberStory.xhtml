<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	 xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:f="http://java.sun.com/jsf/core"
	 xmlns:a4j="http://richfaces.org/a4j"
 	 xmlns:c="http://java.sun.com/jstl/core"
 	 xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/templates/maintmpl.xhtml">
 <ui:param name="moduleTitle" value="#{bundle.page_title_success_story}"></ui:param>
 <ui:param name="userType" value="M"></ui:param>
 <ui:param name="moduleType" value="MH"></ui:param>
 <ui:param name="headerText" value="#{bundle.page_header_success_story}"></ui:param>
  <ui:param name="refManageBean" value="#{udvViewHandler}"></ui:param>
  <ui:define name="js">
  		<script type="text/javascript" src="#{controllerBean.contextPath}/js/Modalhelper.js"> </script>   
 		 
 </ui:define>
 
  <ui:define name="body">    
    <h:panelGroup id="idSectionsCon">
      <rich:spacer width="100%" height="5"/>
      <h:panelGroup id="idTopCon">
          <table border="0" cellspacing="0" cellpadding="0" width="98%">
           <tr>
            <td align="right">
		      <a4j:commandLink rendered="#{storyViewHandler.mentorCertified}" styleClass="table_control_normal_style" action="#{storyViewHandler.initializeDialog}" reRender="idmemberStoryDialog"  oncomplete="Richfaces.showModalPanel('idmemberStoryDialog')">
		           	<a4j:actionparam name="storyId" value="-1"  />
				    <a4j:actionparam name="action" value="ADD"  />
		           	<h:graphicImage value="/images/new.png" align="middle" border="0" />	
		          		 <rich:toolTip styleClass="tooltips_style"  >
				          <span class="tooltips_span_style">#{bundle.success_story_create_new}.<br/></span>
				     </rich:toolTip>	
				     <rich:spacer width="3"/>
				     <h:outputText value="#{bundle.success_story_create_new}" border="0" />			            	
				</a4j:commandLink>	
         		 <a4j:commandLink rendered="#{!storyViewHandler.mentorCertified}" styleClass="table_control_normal_style">
	            	<h:graphicImage value="/images/new.png" align="middle" border="0" > 
	            	</h:graphicImage>	
            		 <rich:toolTip styleClass="tooltips_style"  >
				          <span class="tooltips_span_style">
				              You can not submit the story unless you complete the certification<br/>
				          </span>
				     </rich:toolTip>
				     <rich:spacer width="3"/>
				     <h:outputText value="#{bundle.success_story_create_new}" border="0" />	
				</a4j:commandLink>							
            </td>
           </tr>
          </table>
          
      </h:panelGroup>
      
      <rich:spacer width="100%" height="10"/>
		<rich:panel headerClass="container_box_panel_header"  bodyClass="container_body_style" >
			<f:facet name="header"><h:outputText value="#{bundle.success_story_my_stories}" /> </f:facet>
			<h:panelGrid columns="1" width="100%" cellpadding="0" cellspacing="0" border="0">
				<rich:dataTable  width="100%" id="idDataGrid"  rowClasses=",container_even_row_style" rows="5"  columnsWidth="150,"
			                value="#{storyViewHandler.storyList}" var="story" headerClass="table_column_style" cellpadding="0" cellspacing="0">
		             <rich:column>
			             <f:facet name="header">
			               <h:outputText value="#{bundle.success_story_title}"/>
			             </f:facet>
				 			<h:outputText value="#{story.storyTitle}" />
		             </rich:column>
		             <rich:column>
			             <f:facet name="header">
			                <h:outputText value="#{bundle.success_story_create}"/>
			             </f:facet>
				 			<h:outputText  value="#{story.memberStoryDate}" >
				 			<f:convertDateTime dateStyle="default" pattern="dd-MM-yyyy h:mm a"/>
				 			</h:outputText>
		             </rich:column>		             
		             <rich:column>
			             <f:facet name="header">
			               <h:outputText value="#{bundle.success_story_permission}"/>
			             </f:facet>
				 			<h:outputText  value="#{story.memberPermissionToPublish}" />
		             </rich:column>	  
		             <rich:column>
			             <f:facet name="header">
			               <h:outputText value="#{bundle.common_label_action}"/>
			             </f:facet>		             
		         		 <a4j:commandLink  reRender="idmemberStoryDialog" action="#{storyViewHandler.initializeDialog}" oncomplete="Richfaces.showModalPanel('idmemberStoryDialog')">
				             <a4j:actionparam name="storyId" value="#{story.memberStoryId}"  />
				             <a4j:actionparam name="action" value="EDIT"  />
			            	<h:graphicImage value="/images/edit.png" align="middle" border="0" > 
			            	</h:graphicImage>	
		            		 <rich:toolTip styleClass="tooltips_style"  >
						          <span class="tooltips_span_style">
						              #{bundle.success_story_edit_label}.<br/>
						          </span>
						     </rich:toolTip>	
						</a4j:commandLink>
						<rich:spacer width="5"/>
		         		 <a4j:commandLink  reRender="idDataGrid,idDataScroller" action="#{storyViewHandler.removeObject}" >
				            <a4j:actionparam name="storyId" value="#{story.memberStoryId}"  />
				            <a4j:actionparam name="action" value="DELETE"  />
			            	<h:graphicImage value="/images/delete.png" align="middle" border="0" > 
			            	</h:graphicImage>	
		            		 <rich:toolTip styleClass="tooltips_style"  >
						          <span class="tooltips_span_style">
						              #{bundle.success_story_delete_label}.<br/>
						          </span>
						     </rich:toolTip>	
						</a4j:commandLink>									             
		             </rich:column>
          	   
			      </rich:dataTable>		
		        <rich:datascroller id="idDataScroller" align="center"  for="idDataGrid" maxPages="5" />
			</h:panelGrid>			         
		</rich:panel>
	    

    </h:panelGroup>    
  </ui:define>
  
  <ui:define name="modalPanels">
    <a4j:region>
      <ui:include src="../modals/memberStoryDialog.xhtml">

      </ui:include>
    </a4j:region>
  </ui:define>
</ui:composition>
</html>