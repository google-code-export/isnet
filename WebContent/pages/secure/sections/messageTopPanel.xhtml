<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:a4j="http://richfaces.org/a4j"
   xmlns:rich="http://richfaces.org/rich">
<ui:composition>

          <table border="0" cellspacing="0" cellpadding="0" width="100%">
           <tr style="height: 25px;" >
            	<td align="left"> 
            	 <rich:spacer width="3"/>
		         <h:outputLink styleClass="#{messageHanlder.currentFolder eq 'RECEIVED'? 'menu_item_clink hight_lighted_menu' : 'menu_item_clink'} " 
		           			value="#{controllerBean.contextPath}/pages/secure/#{messageHanlder.memberLinks}?folder=RECEIVED">
		           	<h:graphicImage value="/images/received.png" align="middle" border="0" />	
  					<h:outputText value="Received Item" border="0" />	
		         </h:outputLink>

				<rich:spacer width="5"/>
		         <h:outputLink styleClass="#{messageHanlder.currentFolder eq 'SENT'? 'menu_item_clink hight_lighted_menu' : 'menu_item_clink'} "
		           			value="#{controllerBean.contextPath}/pages/secure/#{messageHanlder.memberLinks}?folder=SENT">
		           	<h:graphicImage value="/images/sent.png" align="middle" border="0" />	
  					<h:outputText value="Sent Item" border="0" />	
		         </h:outputLink>		         
	      		</td>
	      		<td colspan="5" align="right">
	      			<!-- Panel for mentor  -->
		      		<h:panelGroup rendered="#{userType eq 'M'}">
					      <a4j:commandLink style="margin-right: 5px;"  styleClass="table_control_normal_style" action="#{messageHanlder.initMessageDialog}" reRender="idmessageDialog"  oncomplete="Richfaces.showModalPanel('idmessageDialog')">
					            <a4j:actionparam name="activityId" value="-1"  />
					           	<h:graphicImage value="/images/mail_new.png" align="middle" border="0" />	
					          		 <rich:toolTip styleClass="tooltips_style"  >
							          <span class="tooltips_span_style">#{bundle.member_message_create_new_tool_tips}.<br/></span>
							     </rich:toolTip>	
							     <rich:spacer width="3"/>
							     <h:outputText value="#{bundle.member_message_create_new}" border="0" />			            	
							</a4j:commandLink>	
					</h:panelGroup>
					<!-- panel for protege  -->
		      		<h:panelGroup rendered="#{userType eq 'P'}">
					      <a4j:commandLink rendered="#{storyViewHandler.completedTutorial}" style="margin-right: 5px;"  styleClass="table_control_normal_style" action="#{messageHanlder.initMessageDialog}" reRender="idmessageDialog"  oncomplete="Richfaces.showModalPanel('idmessageDialog')">
					            <a4j:actionparam name="activityId" value="-1"  />
					           	<h:graphicImage value="/images/mail_new.png" align="middle" border="0" />	
					          		 <rich:toolTip styleClass="tooltips_style"  >
							          <span class="tooltips_span_style">#{bundle.member_message_create_new_tool_tips}.<br/></span>
							     </rich:toolTip>	
							     <rich:spacer width="3"/>
							     <h:outputText value="#{bundle.member_message_create_new}" border="0" />			            	
							</a4j:commandLink>
					      <a4j:commandLink rendered="#{!storyViewHandler.completedTutorial}" style="margin-right: 5px;"  styleClass="table_control_normal_style"   >
					           	<h:graphicImage value="/images/mail_new.png" align="middle" border="0" />	
					          		 <rich:toolTip styleClass="tooltips_style"  >
							          <span class="tooltips_span_style">Please complete the tutorial to enable new message option.<br/></span>
							     </rich:toolTip>	
							     <rich:spacer width="3"/>
							     <h:outputText value="#{bundle.member_message_create_new}" border="0" />			            	
							</a4j:commandLink>									
					</h:panelGroup>							
				</td>	

           </tr>           
          	<tr bgcolor="#CFCFCF" style="height: 30px;">
            	<td align="left" colspan="3" > 
            		 <rich:spacer width="3"/>
            		<a4j:commandButton onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();" value="#{bundle.button_mark_as_unread}" action="#{messageHanlder.markAsUnRead}" reRender="idDataGridMsg" >
					
					</a4j:commandButton>
					
					 <rich:spacer width="3"/>
            		<a4j:commandButton rendered="false"  onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();" value="#{bundle.button_report_spam}" >
						
					</a4j:commandButton>
					 <rich:spacer width="3"/>
            		<a4j:commandButton  onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();" value="#{bundle.button_delete}" action="#{messageHanlder.removeAllMessages}" reRender="idDataGridMsg">

					</a4j:commandButton>										
	      		</td>

				<td colspan="2" align="right">
            		<a4j:commandButton  onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();" value="#{bundle.message_button_previous}" action="#{messageHanlder.navigateToPreviousPage}" reRender="idDataGridMsg">
					</a4j:commandButton>
					 <rich:spacer width="3"/>
            		<a4j:commandButton style="margin-right: 5px;" onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();" value="#{bundle.message_button_next}" action="#{messageHanlder.navigateToNextPage}" reRender="idDataGridMsg" >
					</a4j:commandButton>					
				 </td>							      
           </tr>
          	<tr  style="height: 30px;">
            	<td align="left" colspan="3" > 
            		 <rich:spacer width="3"/>
            		<h:outputText value="Select: " /> 
            		<rich:spacer width="3"/>
            		
			      	<a4j:commandLink  value="All"  action="#{messageHanlder.selectAllMessages}"  reRender="idDataGridMsg" onclick="forceBlockUI(ajaxProcessMsg);" oncomplete="forceUnblockUI();" >			            	
					</a4j:commandLink>

					 <rich:spacer width="5"/>
			      	<a4j:commandLink value="None" action="#{messageHanlder.deSelectAllMessages}" reRender="idDataGridMsg"  onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();">		            	
					</a4j:commandLink>									
	      		</td>

				<td colspan="2" align="right">
				<h:panelGroup id="idRightButtonPanel">
				<h:outputText value="Show: " /> 
			      	<a4j:commandLink action="#{messageHanlder.showAllMessage}"  styleClass="#{(messageHanlder.showOnlyUnreadMsg eq 'false') ? 'msg_all' :''}" reRender="idDataGridMsg,idRightButtonPanel" onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();">
					     <h:outputText value="All" border="0" />			            	
					</a4j:commandLink>

					 <rich:spacer width="5"/>
			      	<a4j:commandLink styleClass="#{(messageHanlder.showOnlyUnreadMsg eq 'true') ? 'msg_all' :''}" style="margin-right: 5px;" action="#{messageHanlder.showUnReadMessages}" reRender="idDataGridMsg,idRightButtonPanel" onclick="forceBlockUI(ajaxProcessMsg);"   oncomplete="forceUnblockUI();">
					     <h:outputText value="Unread" border="0" />			            	
					</a4j:commandLink>	
				</h:panelGroup>			
				 </td>							      
           </tr>           
           
          </table>
</ui:composition>
</html>