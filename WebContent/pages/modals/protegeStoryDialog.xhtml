<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core">
	<ui:composition>

		<rich:modalPanel id="idprotegeStoryDialog" minHeight="450" minWidth="470" onshow="javascript:limiter();">
			<f:facet name="header"><h:outputText value="#{bundle.protege_viewpoint_modal_title}"/></f:facet>
			<f:facet name="controls">
              	<h:graphicImage value="/images/close.png" style="cursor:pointer" onclick="Richfaces.hideModalPanel('idprotegeStoryDialog')" />
       		</f:facet>

            <a4j:form id="memberStoryForm" >
				<h:inputHidden value="#{storyViewHandler.hasError}" id="errorCount"/>
				<rich:panel styleClass="popup_window_outer_panel_style" id="idPopupPanel">
					<h:panelGrid columns="1" width="100%">
						<h:outputText value="#{bundle.viewpoint_label_description}" style="font-weight: bold;"/>
					</h:panelGrid>
					<h:dataTable rendered="#{storyViewHandler.hasError}" value="#{storyViewHandler.errMsgs}" var="msg" width="100%" columnClasses="error_panel_left_col,error_panel_right_col">
					   <f:facet name="header"><h:outputText  value="#{bundle.member_validation_header}"/> </f:facet>
						<h:column >
							<h:graphicImage value="/images/error2.png" boder="0" style="margin-top: 3px;"/>					
						</h:column>
						<h:column >
						 <h:outputText  value="#{msg}"/>
						</h:column>
					
					</h:dataTable>
															
					<h:panelGrid columns="2" id="gridMemberStory" width="100%">
						<h:outputText value="#{bundle.viewpoint_title}" />
						<h:inputText id="idMemberStoryTitle" value="#{storyViewHandler.currentStory.storyTitle}" styleClass="form_input_text_medium"></h:inputText>

						<h:outputText value="#{bundle.viewpoint_details}" />						    
					    <h:inputTextarea onkeyup="javascript:limiter();" id="idBody" rows="10"  value="#{storyViewHandler.currentStory.memberStoryDescription}" styleClass="form_input_text_medium_large"></h:inputTextarea>
						
						<h:outputText value="" />
						<h:panelGroup>
						<h:inputText  id="idCharCounter" size="10" value="200" readonly="true" /><h:outputText value="#{bundle.success_story_character_left}" /> 
						</h:panelGroup>
						
						<h:outputText value="#{bundle.viewpoint_video_url}" />						    
					    <h:inputText id="idStoryURL"  value="#{storyViewHandler.currentStory.memberStoryAudioVideo}" styleClass="form_input_text_medium_large"/>

						<h:outputText value="#{bundle.success_story_permission}" />						
						<h:selectOneRadio value="#{storyViewHandler.currentStory.memberPermissionToPublish}">
						  <f:selectItem  itemLabel="#{bundle.yes_label}" itemValue="Yes" />
						  <f:selectItem  itemLabel="#{bundle.no_label}" itemValue="No" />
						</h:selectOneRadio>	
		
					</h:panelGrid>
					<h:panelGrid columns="1"  width="100%" columnClasses="column_class_center">
						<h:panelGroup>
							<a4j:commandButton action="#{storyViewHandler.saveStory}"  value="#{bundle.button_submit_label}" oncomplete="ModalHelper.validateModal('memberStoryForm','idprotegeStoryDialog')"  reRender="idDataGrid,idDataScroller,errorCount,idPopupPanel" />
							<a4j:commandButton value="#{bundle.button_close_label}" onclick="Richfaces.hideModalPanel('idprotegeStoryDialog')" />		
						</h:panelGroup>						
					</h:panelGrid>
				</rich:panel>
			</a4j:form>							
		</rich:modalPanel>
	
	</ui:composition>
</html>
