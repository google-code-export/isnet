<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:a4j="http://richfaces.org/a4j"
   xmlns:rich="http://richfaces.org/rich"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:c="http://java.sun.com/jstl/core"
   xmlns:ccmp="http://www.myc2i.com/jsf/commoncmp">
	<ui:composition>
    <rich:modalPanel id="idmessageDialog" minHeight="300" minWidth="450" >      
      <f:facet name="header"><h:outputText value="#{bundle.activity_log_activity_title}"/></f:facet>
      <f:facet name="controls">
                <h:graphicImage value="/images/close.png" style="cursor:pointer" onclick="Richfaces.hideModalPanel('idmessageDialog')" />
          </f:facet>              
         <a4j:form id="memberMessageForm">
         	<h:panelGroup id="idmemberLogDialogContainer">
         	<h:inputHidden value="#{memberLogViewHandler.hasError}" id="errorCount"/>
        	<rich:panel styleClass="popup_window_outer_panel_style" id="idPopupPanel">

	          <h:dataTable rendered="#{memberLogViewHandler.hasError}" value="#{memberLogViewHandler.errMsgs}" var="msg" width="100%" columnClasses="error_panel_left_col,error_panel_right_col">
	             <f:facet name="header"><h:outputText  value="#{bundle.member_validation_header}"/> </f:facet>
	            <h:column >
	              <h:graphicImage value="/images/error2.png" boder="0" style="margin-top: 3px;"/>         
	            </h:column>
	            <h:column >
	             <h:outputText  value="#{msg}"/>
	            </h:column>         
	          </h:dataTable>
                              
	          <h:panelGrid columns="2" id="gridMemberMessage" width="100%">
	            <h:outputText value="To"/>
                <h:inputText id="idTo" value="" styleClass="form_input_text_medium"></h:inputText>                    
	
	
	            <h:outputText value="#{bundle.activity_log_subject}" />
	            <h:inputText id="idTopic" value="#{messageHanlder.currentMessage.subject}" styleClass="form_input_text_medium"></h:inputText> 
	            
	            <h:outputText value="#{bundle.activity_log_body}" />                
	              <h:inputTextarea id="idBody" rows="6"  value="#{messageHanlder.currentMessage.body}" styleClass="form_input_text_medium"></h:inputTextarea>
	                      
	            <h:outputText value=""/>
	            <h:panelGroup>
	              <a4j:commandButton onclick="forceBlockUI(ajaxWaitMsg);" action="#{messageHanlder.addNewMessage}"  value="#{bundle.message_button_send}" oncomplete="forceUnblockUI();ModalHelper.validateModal('memberLogForm','idmemberLogDialog')"  
	                reRender="idDataGrid,idDataScroller,errorCount,idPopupPanel">
	                <f:param name="action" value="${action}"/>                
	              </a4j:commandButton>
	              <a4j:commandButton value="#{bundle.message_button_cancel}" onclick="Richfaces.hideModalPanel('idmessageDialog')" />    
	            </h:panelGroup>       
	         </h:panelGrid>
	         
        </rich:panel>
        </h:panelGroup>
      </a4j:form>      
    </rich:modalPanel>  
  </ui:composition>
</html>
