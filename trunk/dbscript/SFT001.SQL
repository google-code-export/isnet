DROP TABLE TEST_TUTORIAL_DOCUMENT CASCADE CONSTRAINTS;

CREATE TABLE TEST_TUTORIAL_DOCUMENT
(
  TEST_TUTORIAL_DOCUMENT_ID  NUMBER             NOT NULL,
  DOCUMENT_NAME              VARCHAR2(500 BYTE),
  DOCUMENT_INTRO_AUDIO       BLOB,
  DOCUMENT_INTRO_VIDEO       BLOB,
  RECORD_CREATOR_ID          VARCHAR2(20 BYTE)  NOT NULL,
  RECORD_CREATE_DATE         DATE,
  RECORD_LAST_UPDATER_ID     VARCHAR2(20 BYTE)  NOT NULL,
  RECORD_LAST_UPDATED_DATE   DATE,
  AUDIO_FILE_NAME            VARCHAR2(255 BYTE),
  VIDEO_FILE_NAME            VARCHAR2(255 BYTE)
)
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX TEST_TUTORIAL_DOCUMENT_PK ON TEST_TUTORIAL_DOCUMENT
(TEST_TUTORIAL_DOCUMENT_ID)
LOGGING
NOPARALLEL;

SET DEFINE OFF;

Insert into TEST_TUTORIAL_DOCUMENT
   (TEST_TUTORIAL_DOCUMENT_ID, DOCUMENT_NAME, DOCUMENT_INTRO_AUDIO, DOCUMENT_INTRO_VIDEO, RECORD_CREATOR_ID, 
    RECORD_CREATE_DATE, RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME)
 Values
   (1, 'Mentor online tutorial', NULL, NULL, '1', 
    TO_DATE('09/13/2009 05:30:58', 'MM/DD/YYYY HH24:MI:SS'), '1', TO_DATE('09/13/2009 05:30:58', 'MM/DD/YYYY HH24:MI:SS'), NULL, NULL);
Insert into TEST_TUTORIAL_DOCUMENT
   (TEST_TUTORIAL_DOCUMENT_ID, DOCUMENT_NAME, DOCUMENT_INTRO_AUDIO, DOCUMENT_INTRO_VIDEO, RECORD_CREATOR_ID, 
    RECORD_CREATE_DATE, RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME)
 Values
   (2, 'Protégé online tutorial', NULL, NULL, '1', 
    TO_DATE('09/13/2009 05:32:48', 'MM/DD/YYYY HH24:MI:SS'), '1', TO_DATE('09/13/2009 05:32:48', 'MM/DD/YYYY HH24:MI:SS'), NULL, NULL);
Insert into TEST_TUTORIAL_DOCUMENT
   (TEST_TUTORIAL_DOCUMENT_ID, DOCUMENT_NAME, DOCUMENT_INTRO_AUDIO, DOCUMENT_INTRO_VIDEO, RECORD_CREATOR_ID, 
    RECORD_CREATE_DATE, RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME)
 Values
   (3, 'Online question and answer', NULL, NULL, '1', 
    TO_DATE('09/13/2009 05:31:13', 'MM/DD/YYYY HH24:MI:SS'), '1', TO_DATE('09/13/2009 05:31:13', 'MM/DD/YYYY HH24:MI:SS'), NULL, NULL);
COMMIT;


DROP TABLE TEST_TUTORIAL_MODULES CASCADE CONSTRAINTS;

CREATE TABLE TEST_TUTORIAL_MODULES
(
  TEST_TUTORIAL_MODULES_ID   NUMBER             NOT NULL,
  TEST_TUTORIAL_DOCUMENT_ID  NUMBER             NOT NULL,
  TEST_INDICATOR             CHAR(1 BYTE)       NOT NULL,
  MEMBER_TYPE_INDICATOR      NUMBER             NOT NULL,
  MODULE_NAME                VARCHAR2(500 BYTE) NOT NULL,
  MODULE_INTRO_AUDIO         BLOB,
  MODULE_INTRO_VIDEO         BLOB,
  MODULE_TEXT                VARCHAR2(2000 BYTE) NOT NULL,
  RECORD_CREATOR_ID          VARCHAR2(20 BYTE)  NOT NULL,
  RECORD_CREATE_DATE         DATE,
  RECORD_LAST_UPDATER_ID     VARCHAR2(20 BYTE)  NOT NULL,
  RECORD_LAST_UPDATED_DATE   DATE,
  AUDIO_FILE_NAME            VARCHAR2(255 BYTE),
  VIDEO_FILE_NAME            VARCHAR2(255 BYTE),
  MODULE_TITLE               VARCHAR2(500 BYTE),
  SERIAL                     NUMBER,
  TEST_QUESTIONS_COUNT NUMBER DEFAULT 10
)
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

--ALTER TABLE TEST_TUTORIAL_MODULES
--ADD (TEST_QUESTIONS_COUNT NUMBER DEFAULT 10);

CREATE UNIQUE INDEX TEST_TUTORIAL_MODULES_PK ON TEST_TUTORIAL_MODULES
(TEST_TUTORIAL_MODULES_ID)
LOGGING
NOPARALLEL;
SET DEFINE OFF;
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (1, 1, '1', 15, 'Module 1 - Da''wah Workshop', 
    NULL, NULL, '<p>Test</p>', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '19', TO_DATE('03/28/2010 18:36:10', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m1/m_1_page_1.swf', NULL, 'Da''wah Workshop', 
    1);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (2, 1, '1', 15, 'Module 2 - Challenges to Successful Da''wah', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m2/m_2_page_1.swf', NULL, 'Challenges to Successful Da''wah', 
    2);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (3, 1, '1', 15, 'Module 3 - Goals and Types of Da''wah', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m3/m_3_page_1.swf', NULL, 'Goals and Types of Da''wah', 
    3);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (4, 1, '1', 15, 'Module 4 - Da''wah As Marketing', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m4/m_4_page_1.swf', NULL, 'Da''wah As Marketing', 
    4);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (5, 1, '1', 15, 'Module 5 - The Art of Public Speaking', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m5/m_5_page_1.swf', NULL, 'The Art of Public Speaking', 
    5);


Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (6, 1, '1', 15, 'Module 6A - Da''wah Content', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m6/m_6_page_1.swf', NULL, 'Da''wah Content', 
    6);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (10, 1, '1', 15, 'Module 6B - Da''wah Content', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m6b/m_6B_page_1.swf', NULL, 'Da''wah Content', 
    7);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (11, 1, '1', 15, 'Module 6C - Da''wah Content', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m6c/m_6B_page_1.swf', NULL, 'Da''wah Content', 
    8);    
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (7, 1, '1', 15, 'Module 7 - A Primer on Christianity for Muslims Engaged in Da''wah', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m7/m_7_page_1.swf', NULL, 'A Primer on Christianity for Muslims Engaged in Da''wah', 
    9);
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL, TEST_QUESTIONS_COUNT)
 Values
   (8, 1, '1', 15, 'Module 8 - Literature for Da''wah', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m8/m_8_page_1.swf', NULL, 'Literature for Da''wah', 
    9, 10);
    
Insert into TEST_TUTORIAL_MODULES
   (TEST_TUTORIAL_MODULES_ID, TEST_TUTORIAL_DOCUMENT_ID, TEST_INDICATOR, MEMBER_TYPE_INDICATOR, MODULE_NAME, 
    MODULE_INTRO_AUDIO, MODULE_INTRO_VIDEO, MODULE_TEXT, RECORD_CREATOR_ID, RECORD_CREATE_DATE, 
    RECORD_LAST_UPDATER_ID, RECORD_LAST_UPDATED_DATE, AUDIO_FILE_NAME, VIDEO_FILE_NAME, MODULE_TITLE, 
    SERIAL)
 Values
   (9, 2, '0', 17, 'Islam 101', 
    NULL, NULL, 'Test', '1', TO_DATE('09/13/2009 05:43:34', 'MM/DD/YYYY HH24:MI:SS'), 
    '1', TO_DATE('09/30/2009 23:09:34', 'MM/DD/YYYY HH24:MI:SS'), 'pages/secure/media/m101/m_101_page_1.swf', NULL, 'Islam 101', 
    11);
COMMIT;



DROP TABLE TEST_TUTORIAL_QUESTION_ANS CASCADE CONSTRAINTS;

CREATE TABLE TEST_TUTORIAL_QUESTION_ANS
(
  TEST_TUTORIAL_QUESTION_ANS_ID  NUMBER         NOT NULL,
  TEST_TUTORIAL_MODULES_ID       NUMBER         NOT NULL,
  PAGE_NUMBER                    NUMBER,
  PAGE_TEXT                      VARCHAR2(2000 BYTE),
  PAGE_AUDIO                     BLOB,
  PAGE_VIDEO                     BLOB,
  QUESTION                       VARCHAR2(500 BYTE),
  QUESTION_CORRECT_ANSWER        VARCHAR2(100 BYTE),
  QUESTION_OPTION_ANSWER_A       VARCHAR2(500 BYTE),
  QUESTION_OPTION_ANSWER_B       VARCHAR2(500 BYTE),
  QUESTION_OPTION_ANSWER_C       VARCHAR2(500 BYTE),
  QUESTION_OPTION_ANSWER_D       VARCHAR2(500 BYTE),
  QUESTION_OPTION_ANSWER_E       VARCHAR2(500 BYTE),
  QUESTION_OPTION_ANSWER_F       VARCHAR2(500 BYTE),
  RECORD_CREATOR_ID              VARCHAR2(20 BYTE),
  RECORD_CREATE_DATE             DATE,
  RECORD_LAST_UPDATER_ID         VARCHAR2(20 BYTE),
  RECORD_LAST_UPDATED_DATE       DATE,
  AUDIO_FILE_NAME                VARCHAR2(255 BYTE),
  VIDEO_FILE_NAME                VARCHAR2(255 BYTE),
  PAGE_TITLE                     VARCHAR2(500 BYTE),
  ISQUESTION                     VARCHAR2(5 BYTE)
)
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX MODULE_PAGE_UK1 ON TEST_TUTORIAL_QUESTION_ANS
(TEST_TUTORIAL_MODULES_ID, PAGE_NUMBER)
LOGGING
NOPARALLEL;


ALTER TABLE TEST_TUTORIAL_QUESTION_ANS ADD (
  CONSTRAINT MODULE_PAGE_UK1
 UNIQUE (TEST_TUTORIAL_MODULES_ID, PAGE_NUMBER));
 
SET DEFINE OFF;




ALTER TABLE TUTORIAL_TEST
 DROP PRIMARY KEY CASCADE;
DROP TABLE TUTORIAL_TEST CASCADE CONSTRAINTS;

CREATE TABLE TUTORIAL_TEST
(
  TUTORIAL_TEST_ID          NUMBER              NOT NULL,
  DOCUMENT_ID               NUMBER              NOT NULL,
  MODULE_ID                 NUMBER              NOT NULL,
  MEMBER_ID                 NUMBER              NOT NULL,
  TEST_START_TIME           DATE,
  TEST_END_TIME             DATE,
  TOTAL_QUESTIONS           NUMBER,
  TOTAL_CORRECT             NUMBER,
  IS_PASSED                 VARCHAR2(5 BYTE),
  RECORD_CREATOR_ID         VARCHAR2(20 BYTE),
  RECORD_CREATE_DATE        DATE,
  RECORD_LAST_UPDATER_ID    VARCHAR2(20 BYTE),
  RECORD_LAST_UPDATED_DATE  DATE,
  IS_COMPLETED              VARCHAR2(100 BYTE),
  LAST_ACCESS_PAGE          NUMBER
)
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX TUTORIAL_TEST_PK ON TUTORIAL_TEST
(TUTORIAL_TEST_ID)
LOGGING
NOPARALLEL;


ALTER TABLE TUTORIAL_TEST ADD (
  CONSTRAINT TUTORIAL_TEST_PK
 PRIMARY KEY
 (TUTORIAL_TEST_ID));

 
 
 
 ALTER TABLE TUTORIAL_TEST_DETAILS
 DROP PRIMARY KEY CASCADE;
DROP TABLE TUTORIAL_TEST_DETAILS CASCADE CONSTRAINTS;

CREATE TABLE TUTORIAL_TEST_DETAILS
(
  ID                        NUMBER              NOT NULL,
  TUTORIAL_TEST_ID          NUMBER              NOT NULL,
  QUESTION_ID               NUMBER              NOT NULL,
  MENTOR_ANSWER             VARCHAR2(20 BYTE)   NOT NULL,
  IS_CORRECT                VARCHAR2(5 BYTE),
  RECORD_CREATOR_ID         VARCHAR2(20 BYTE)   NOT NULL,
  RECORD_CREATE_DATE        DATE,
  RECORD_LAST_UPDATER_ID    VARCHAR2(20 BYTE)   NOT NULL,
  RECORD_LAST_UPDATED_DATE  DATE
)
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX TEST_QUESTION_UK1 ON TUTORIAL_TEST_DETAILS
(TUTORIAL_TEST_ID, QUESTION_ID)
LOGGING
NOPARALLEL;


CREATE UNIQUE INDEX TUTORIAL_TEST_DETAILS_PK ON TUTORIAL_TEST_DETAILS
(ID)
LOGGING
NOPARALLEL;


ALTER TABLE TUTORIAL_TEST_DETAILS ADD (
  CONSTRAINT TUTORIAL_TEST_DETAILS_PK
 PRIMARY KEY
 (ID));

ALTER TABLE TUTORIAL_TEST_DETAILS ADD (
  CONSTRAINT TEST_QUESTION_UK1
 UNIQUE (TUTORIAL_TEST_ID, QUESTION_ID));


ALTER TABLE TUTORIAL_TEST_DETAILS ADD (
  CONSTRAINT TUTORIAL_TEST_TEST_DETAILS_FK1 
 FOREIGN KEY (TUTORIAL_TEST_ID) 
 REFERENCES TUTORIAL_TEST (TUTORIAL_TEST_ID));

